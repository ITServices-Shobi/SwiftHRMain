@model SwiftHR.Utility.DashBoard

@using Microsoft.Extensions.Configuration
@using System.Globalization
@inject IConfiguration Configuration

@{
    Layout = "_MainLayout";
    ViewData["Title"] = "Dashboard";
}


<link rel="stylesheet" href="~/bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css">
<link rel="stylesheet" href="~/bower_components/datatables.net/js/jquery.dataTables.min.js">



<style type="text/css">
    .info-box-number {
        display: block;
        font-weight: bold;
        font-size: 24px;
        color: #337ab7;
    }

    .pre-loader {
        background: #ffffff;
        background-position: center center;
        background-size: 13%;
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        z-index: 12345;
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        justify-content: center;
    }

        .pre-loader .loader-logo {
            padding-bottom: 15px;
        }

        .pre-loader .loader-progress {
            height: 8px;
            border-radius: 15px;
            max-width: 200px;
            margin: 0 auto;
            display: block;
            background: #ecf0f4;
            overflow: hidden;
        }

        .pre-loader .bar {
            width: 0%;
            height: 8px;
            display: block;
            background: #1b00ff;
        }

        .pre-loader .percent {
            text-align: center;
            font-size: 24px;
            display: none;
        }

        .pre-loader .loading-text {
            text-align: center;
            font-size: 18px;
            font-weight: 500;
            padding-top: 15px;
        }
</style>

<div class="pre-loader">
    <div class="pre-loader-box" style="margin-top: -4%;">
        <div class="loader-logo" style="margin-left:8%;"><img src="~/dist/img/swiftHRPrgressbar.png" alt=""></div>
        <div class='loader-progress' id="progress_div" style="margin-top: -4%;">
            <div class='bar' id='bar1'></div>
        </div>
        <div class='percent' id='percent1'>0%</div>
        <div class="loading-text" style="font-weight: 600; font-size:20px; margin-left: 5%; color: #337ab7;">
            Page is Loading... Please Wait...
        </div>
    </div>
</div>

<section class="content-header">
    <h1>
        Dashboard
    </h1>
</section>

<!-- Main content -->
<section class="content">
    <!-- Info boxes -->
    <div class="row">
        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-yellow"><i class="ion ion-ios-people-outline"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">New Joinee</span>
                    <span class="info-box-number">@Model.empMasterDataItems.Where(x => System.Convert.ToDateTime(x.DateOfJoining).Month == @System.DateTime.Now.Month).ToList().Count</span>
                </div>
                <!-- /.info-box-content -->

            </div>
            <!-- /.info-box -->
        </div>
        <!-- /.col -->
        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box">

                <span class="info-box-icon bg-green"><i class="fa fa-calendar"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">Today's Attandence</span>
                    <span class="info-box-number">360</span>
                </div>
                <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
        </div>
        <!-- /.col -->
        <!-- fix for small devices only -->
        <div class="clearfix visible-sm-block"></div>

        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-red"><i class="fa fa-exclamation-circle"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">Employee's On Leave</span>
                    <span class="info-box-number">@Model.leaveApplyListAll.Where(x => System.Convert.ToDateTime(x.LeaveFromDate.ToString()) <= System.Convert.ToDateTime(@System.DateTime.Now.ToShortDateString()) && System.Convert.ToDateTime(x.LeaveToDate.ToString()) >= System.Convert.ToDateTime(@System.DateTime.Now.ToShortDateString())).ToList().Count</span>
                </div>
                <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
        </div>
        <!-- /.col -->
        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-aqua"><i class="fa fa-desktop"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">Helpdesk Requests</span>
                    <span class="info-box-number">40</span>
                </div>
                <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
        </div>
        <!-- /.col -->
    </div>
    <!-- /.row -->

    <div class="row">
        <div class="col-md-12">
            <div class="box">
                <div class="box-header with-border">
                    <h3 class="box-title">Monthly Employee Joining Report</h3>

                    <div class="box-tools pull-right">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse">
                            <i class="fa fa-minus"></i>
                        </button>

                    </div>
                </div>
                <!-- /.box-header -->
                <div class="box-body" style="margin-bottom: -2%;">
                    <div class="row">
                        <div class="col-md-8">
                            <p class="text-center">
                                <strong> @System.DateTime.Now.AddMonths(-6).ToString("MMMM"), @System.DateTime.Now.AddMonths(-6).Year.ToString() - @System.DateTime.Now.AddMonths(-1).ToString("MMMM"), @System.DateTime.Now.AddMonths(-1).Year.ToString() </strong>
                            </p>

                            <div class="chart">
                                <input id="chartData" name="chartValue1" type="hidden" />
                                <input id="chartMonths" name="chartValue2" type="hidden" />
                                <!-- Sales Chart Canvas -->
                                @*<canvas id="salesChart" style="height: 180px;">

                                    </canvas>*@
                                <canvas id="swifthrcharts" style="height: 180px;"></canvas>
                                @*<canvas id="myChart" style="height: 180px;"></canvas>*@
                            </div>
                            <!-- /.chart-responsive -->
                        </div>
                        <!-- /.col -->
                        <div class="col-md-4">
                            <p class="text-center">
                                <strong>Department wise employee count</strong>
                            </p>
                            <div id="divDepartEmpCount">
                                @{int totalEmp = @Model.empMasterDataItems.Where(x => x.IsActive == true).ToList().Count;}
                                @foreach (var depd in Model.departmentListAll.Where(x => x.CompanyId == 1).ToList())
                                {
                                    @if (depd.DepartmentName != "" && depd.DepartmentName != null)
                                    {
                                        <div class="progress-group">
                                            <span class="progress-text">@depd.DepartmentName</span>
                                            @{int totalInDep = Model.empMasterDataItems.Where(x => x.IsActive == true && x.Department == depd.DepartmentName).ToList().Count;}
                                            @{String deptPerc = Model.GetDepartmentWiseEmployeePercentage(totalInDep, totalEmp);}

                                            <span class="progress-number"><b>@totalInDep</b> &nbsp; </span>
                                            <div class="progress">
                                                @*<div class="progress-bar progress-bar-aqua progress-bar-striped active" style="width: @deptPerc%">@deptPerc%</div>*@
                                                @if (depd.DepartmentName != "" && depd.DepartmentName != null)
                                                {
                                                    <div class="progress-bar @Configuration["DepartmentProgressBarClass:" + @depd.DepartmentName] progress-bar-striped active" style="width: @deptPerc%">@deptPerc%</div>
                                                }
                                            </div>
                                        </div>
                                    }
                                }

                                <!--<div class="progress-group">
                                    <span class="progress-text">HR & Admin</span>
                                    <span class="progress-number"><b>20</b> &nbsp; </span>

                                    <div class="progress sm">
                                        <div class="progress-bar progress-bar-aqua" style="width: 20%"></div>
                                    </div>
                                </div>-->
                                <!-- /.progress-group -->
                                <!--<div class="progress-group">
                                    <span class="progress-text">IT</span>
                                    <span class="progress-number"><b>80</b> &nbsp; </span>

                                    <div class="progress sm">
                                        <div class="progress-bar progress-bar-red" style="width: 80%"></div>
                                    </div>
                                </div>-->
                                <!-- /.progress-group -->
                                <!--<div class="progress-group">
                                    <span class="progress-text">Finance</span>
                                    <span class="progress-number"><b>10</b> &nbsp; </span>

                                    <div class="progress sm">
                                        <div class="progress-bar progress-bar-green" style="width: 10%"></div>
                                    </div>
                                </div>-->
                                <!-- /.progress-group -->
                                <!--<div class="progress-group">
                                    <span class="progress-text">Corporate IT Support Center</span>
                                    <span class="progress-number"><b>60</b> &nbsp;</span>

                                    <div class="progress sm">
                                        <div class="progress-bar progress-bar-yellow" style="width: 60%"></div>
                                    </div>
                                </div>
                                <div class="progress-group">
                                    <span class="progress-text">Management</span>
                                    <span class="progress-number"><b>15</b> &nbsp; </span>

                                    <div class="progress sm">
                                        <div class="progress-bar progress-bar-red" style="width: 15%"></div>
                                    </div>
                                </div>-->
                                <!-- /.progress-group -->
                                <!--<div class="progress-group">
                                    <span class="progress-text">Sales</span>
                                    <span class="progress-number"><b>30</b> &nbsp; </span>

                                    <div class="progress sm">
                                        <div class="progress-bar progress-bar-green" style="width: 30%"></div>
                                    </div>
                                </div>-->
                                <!-- /.progress-group -->
                                <!--<div class="progress-group">
                                    <span class="progress-text">Quality Assurance</span>
                                    <span class="progress-number"><b>50</b>&nbsp;</span>

                                    <div class="progress sm">
                                        <div class="progress-bar progress-bar-yellow" style="width: 50%"></div>
                                    </div>
                                </div>-->
                            </div>
                            <!-- /.progress-group -->
                        </div>
                        <!-- /.col -->
                    </div>
                    <!-- /.row -->
                </div>
                <!-- ./box-body -->
                <div class="box-footer">
                    <div class="row">
                        <div class="col-sm-3 col-xs-6">
                            <div id="TotalEmployees" class="description-block border-right">
                                @*<span class="description-percentage text-green"><i class="fa fa-caret-up"></i> 17%</span>*@
                                @*<h5 class="description-header">375</h5>*@
                                <h5 class="description-header">@Model.empMasterDataItems.Count</h5>
                                <span class="description-text">TOTAL EMPLOYEES</span>
                            </div>
                            <!-- /.description-block -->
                        </div>
                        <!-- /.col -->
                        <div class="col-sm-3 col-xs-6">
                            <div class="description-block border-right">
                                @*<span class="description-percentage text-yellow"><i class="fa fa-caret-left"></i> 0%</span>*@
                                @*<h5 class="description-header">@Model.empMasterDataItems.Where(x => System.Convert.ToDateTime(x.DateOfJoining).Month == @System.DateTime.Now.Month - 6).ToList().Count</h5>*@
                                @*<h5 class="description-header">@Model.empMasterDataItems.Where(x => System.Convert.ToDateTime(x.DateOfJoining).AddMonths(6) >= @System.DateTime.Now).ToList().Count</h5>*@

                                <h5 class="description-header">@Model.empMasterDataItems.Where(x => System.Convert.ToDateTime(x.DateOfJoining) >= @System.Convert.ToDateTime(@System.DateTime.Now.Year + "/" + @System.DateTime.Now.Month + "/" + "1").AddMonths(-6)).ToList().Count</h5>
                                <span class="description-text">JOINED IN LAST 6 MONTHS</span>
                            </div>
                            <!-- /.description-block -->
                        </div>
                        <!-- /.col -->
                        <div class="col-sm-3 col-xs-6">
                            <div class="description-block border-right">
                                @*<span class="description-percentage text-green"><i class="fa fa-caret-up"></i> 20%</span>*@
                                <h5 class="description-header">@Model.empMasterDataItems.Where(x => System.Convert.ToDateTime(x.DateOfResignation).AddDays(180) >= @System.DateTime.Now).ToList().Count</h5>
                                <span class="description-text">RESIGNED IN LAST 6 MONTHS</span>
                            </div>
                            <!-- /.description-block -->
                        </div>

                    </div>
                    <!-- /.row -->
                </div>
                <!-- /.box-footer -->
            </div>
            <!-- /.box -->
        </div>
        <!-- /.col -->
    </div>

    <div class="row">
        <!-- Left col -->
        <div class="col-md-8">
            <!-- TABLE: NEW JOINED EMPLOYEES -->
            <div class="box box-info">
                <div class="box-header with-border">
                    <h3 class="box-title">New Joined Employees</h3>

                    <div class="box-tools pull-right">
                        <a class="btn btn-default btn-circle pull-right hidden-print" id="btnExport"><i class="fa fa-file-pdf-o"></i></a>
                        <button type="button" class="btn btn-box-tool pull-right" data-widget="collapse">
                            <i class="fa fa-minus"></i>
                        </button>
                    </div>
                </div>
                <!-- /.box-header -->
                <!-- /.box-header -->
                <div class="box-body">
                    <div class="table-responsive" id="divJoinerslist">
                        <table id="tblJoinersList" class="table table-bordered table-striped nowrap table-hover table-condensed">
                            <thead>
                                <tr align="center">
                                    <th class="bg-primary">Employee No</th>
                                    <th class="bg-primary">Name</th>
                                    <th class="bg-primary">Department</th>
                                    <th class="bg-primary">Self-Onboarding</th>
                                    <th class="bg-primary">Joining Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (Model != null && Model.empMasterDataItems.Count() > 0)
                                {

                                    @foreach (var empd in Model.empMasterDataItems.Where(x => System.Convert.ToDateTime(x.DateOfJoining).Month == @System.DateTime.Now.Month - 1).ToList())
                                    {
                                        <tr>
                                            <td>
                                                <a asp-controller="Employee" asp-action="EmployeeDetails" asp-route-empId="@empd.EmployeeId" data-toggle="modal" data-target="#modal-default">
                                                    <span style="margin-left:5%;">
                                                        <strong> @empd.EmployeeNumber </strong>
                                                    </span>
                                                </a>
                                                <input id="hndfEmployeeIdVal" name="empId" type="hidden" value="@empd.EmployeeId" />
                                            </td>
                                            <td style="width: 34%;"> <img src="../UploadImages/@empd.EmployeeProfilePhoto" alt="Emp Image" style="width:10% !important; border-radius: 50%;"> <span style="margin-left:5%;"> <strong> @empd.FirstName  @empd.MiddleName  @empd.LastName </strong>  </span> </td>

                                            @if (empd.Department != "" && empd.Department != null)
                                            {
                                                @*<td><span class="@Configuration["DepartmentBootStrapSettings:" + @Model.GetEmployeeDepartmentColorByDeptNumber(empd.Department).ToString()]">@Model.DepartmentTruncate(empd.Department,12)</span></td>*@
                                                <td align="center"><span class="@Configuration["DepartmentBootStrapSettings:" + @Model.GetEmployeeDepartmentColorByDeptNumber(empd.Department).ToString()]">@empd.Department.ToString().PadLeft(12)</span></td>

                                            }
                                            else
                                            {
                                                <td align="center"><span class="@Configuration["DepartmentBootStrapSettings:" + @Model.GetEmployeeDepartmentColorByDeptNumber(empd.Department).ToString()]">Not Assigned</span></td>

                                            }


                                            @*<td><span class="@Configuration["DepartmentBootStrapSettings:2"]">@empd.Department</span></td>*@
                                            @*<td>
                                                    <div class="sparkbar" data-color="#00a65a" data-height="20">90,80,90,-70,61,-83,63</div>
                                                </td>*@
                                            @if (Model.empOnboardingDetails.Where(x => x.OnbemployeeId == empd.EmployeeId).ToList().Count() <= 0)
                                            {
                                                <td align="center"><small class="label  bg-yellow-gradient"><i class="fa fa-battery-0"></i> Not Applicable </small></td>
                                            }
                                            else
                                            {
                                                @foreach (var empOnb in Model.empOnboardingDetails.Where(x => x.OnbemployeeId == empd.EmployeeId).ToList())
                                                {
                                                    @if (empOnb.OnboardingStatus == 0)
                                                    {
                                                        <td style="width: 10%;"><small class="label  bg-red-gradient"><i class="fa fa-gears"></i> Initiated </small></td>
                                                    }
                                                    @if (empOnb.OnboardingStatus == 1)
                                                    {
                                                        <td style="width: 10%;"><small class="label  bg-green-gradient"><i class="fa fa-folder-open-o"></i> In Progress </small></td>
                                                    }
                                                    @if (empOnb.OnboardingStatus == 2)
                                                    {
                                                        <td style="width: 10%;"><small class="label bg-blue-gradient"><i class="fa fa-calendar-times-o"></i> Pending Approval </small></td>
                                                    }
                                                }
                                            }

                                            <td>@empd.DateOfJoining </td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                    <!-- /.table-responsive -->
                </div>
                <!-- /.box-body -->


                <div class="box-footer clearfix" style="margin-top: 2%;">
                    @*<li id="liAddEmployee" class="btn btn-sm btn-info btn-flat pull-left"><a asp-controller="Employee" asp-action="AddEmployee" onclick="menuClick('liAddEmployee')"><i class="fa fa-circle-o"></i> Add New Employee </a></li>*@

                    <a class="btn btn-sm btn-info btn-flat pull-left" asp-controller="Employee" asp-action="AddEmployee" onclick="menuClick('liAddEmployee')"> Add New Employee </a>

                    @*<a href="javascript:void(0)" class="btn btn-sm btn-info btn-flat pull-left">Add New Employee</a>*@
                    @*<a href="javascript:void(0)" class="btn btn-sm btn-default btn-flat pull-right">View All</a>*@
                    <a class="btn btn-sm btn-default btn-flat pull-right" asp-controller="Employee" asp-action="EmployeeList" onclick="menuClick('liEmployeeList')"> View All </a>
                </div>
                <!-- /.box-footer -->
            </div>
            <!-- /.box -->
        </div>
        <div class="col-md-4">
            <!-- LEAVES TODAY -->
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">Employees On Leave Today</h3>
                    <div class="box-tools pull-right">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse">
                            <i class="fa fa-minus"></i>
                        </button>
                    </div>
                </div>
                <!-- /.box-header -->
                <div class="box-body">
                    <ul class="products-list product-list-in-box">
                        @if (Model != null && Model.empMasterDataItems.Count() > 0)
                        {

                            @foreach (var leaveToday in Model.leaveApplyListAll.Where(x => System.Convert.ToDateTime(x.LeaveFromDate.ToString()) <= System.Convert.ToDateTime(@System.DateTime.Now.ToShortDateString()) && System.Convert.ToDateTime(x.LeaveToDate.ToString()) >= System.Convert.ToDateTime(@System.DateTime.Now.ToShortDateString())).ToList())
                            {

                                @if (Model != null && Model.empMasterDataItems.Count() > 0)
                                {
                                    @foreach (var empd in Model.empMasterDataItems.Where(x => x.EmployeeId == leaveToday.EmployeeId).ToList())
                                    {
                                        <li class="item">
                                            <div class="product-img">
                                                <img src="../UploadImages/@empd.EmployeeProfilePhoto" alt="Product Image">
                                            </div>
                                            <div class="product-info">
                                                <a href="javascript:void(0)" class="product-title">
                                                    @empd.FirstName @empd.MiddleName @empd.LastName
                                                    <span class="label label-warning pull-right"> @System.Convert.ToDateTime(leaveToday.LeaveToDate).AddDays(1).Subtract(System.Convert.ToDateTime(leaveToday.LeaveFromDate)).Days day(s)</span>
                                                </a>
                                                <span class="product-description">
                                                    @empd.Department | @empd.Designation
                                                </span>
                                                <span class="product-description">
                                                    @System.Convert.ToDateTime(leaveToday.LeaveFromDate).ToShortDateString() to @System.Convert.ToDateTime(leaveToday.LeaveToDate).ToShortDateString() | @leaveToday.LeaveType
                                                </span>
                                            </div>
                                        </li>
                                    }
                                }
                            }
                        }


                        <!-- /.item -->
                        <!--<li class="item">
                            <div class="product-img">
                                <img src="~/dist/img/default-50x50.gif" alt="Product Image">
                            </div>
                            <div class="product-info">
                                <a href="javascript:void(0)" class="product-title">
                                    Employee Name
                                    <span class="label label-warning pull-right">days</span>
                                </a>
                                <span class="product-description">
                                    Department | Designation
                                </span>
                                <span class="product-description">
                                    15 Feb to 20 Feb | SL
                                </span>
                            </div>
                        </li>-->
                        <!-- /.item -->
                        <!--<li class="item">
                            <div class="product-img">
                                <img src="~/dist/img/default-50x50.gif" alt="Product Image">
                            </div>
                            <div class="product-info">
                                <a href="javascript:void(0)" class="product-title">
                                    Employee Name
                                    <span class="label label-warning pull-right">days</span>
                                </a>
                                <span class="product-description">
                                    Department | Designation
                                </span>
                                <span class="product-description">
                                    15 Feb to 20 Feb | SL
                                </span>
                            </div>
                        </li>-->
                        <!-- /.item -->
                        <!--<li class="item">
                            <div class="product-img">
                                <img src="~/dist/img/default-50x50.gif" alt="Product Image">
                            </div>
                            <div class="product-info">
                                <a href="javascript:void(0)" class="product-title">
                                    Employee Name
                                    <span class="label label-warning pull-right">days</span>
                                </a>
                                <span class="product-description">
                                    Department | Designation
                                </span>
                                <span class="product-description">
                                    15 Feb to 20 Feb | SL
                                </span>
                            </div>
                        </li>-->

                    </ul>
                </div>
                <!-- /.box-body -->
                <div class="box-footer text-center">
                    <a asp-controller="Leaves" asp-action="LeavesList" class="uppercase"> View All </a>
                </div>
                <div class="box-footer text-center">
                    <a href="javascript:void(0)" class="uppercase"> Add Leave On-behalf </a>
                </div>
                <!-- /.box-footer -->
            </div>
            <!-- /.box -->
        </div>
    </div>


    <div class="modal fade" id="modal-default">
        <div class="modal-dialog" style="width: 65% !important;">

            <div class="modal-content">

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->


</section>

@section Scripts {
    <!-- ChartJS -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.4.1/dist/chart.min.js"></script>
    <!-- Export plugin -->
    <script type="text/javascript" src="~/lib/hhurz/libs/FileSaver/FileSaver.min.js"></script>
    <script type="text/javascript" src="~/lib/hhurz/libs/js-xlsx/xlsx.core.min.js"></script>
    <script type="text/javascript" src="~/lib/hhurz/libs/jsPDF/jspdf.min.js"></script>
    <script type="text/javascript" src="~/lib/hhurz/libs/jsPDF-AutoTable/jspdf.plugin.autotable.js"></script>
    <script type="text/javascript" src="~/lib/hhurz/tableExport.js"></script>
    <script type="text/javascript" src="~/lib/hhurz/tableExport.min.js"></script>
    <!-- jQuery 3 -->
    @*<script src="~/bower_components/jquery/dist/jquery.min.js"></script>*@

    <script>

        @*getData();
        chartIT();

        function chartIT() {*@
        const ctx = document.getElementById('myChart').getContext('2d');
        const myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
                datasets: [{
                    label: '# of Votes',
                    data: [12, 19, 3, 5, 2, 3],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)',
                        'rgba(255, 159, 64, 0.2)'
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

    </script>

    <script>

        const globalVariable = {
            dataPerMonth5: [45, 48, 40, 19, 86, 88]
        };


    </script>


    <script src="~/bower_components/chart.js/Chart.js"></script>

    @*<script src="~/dist/js/pages/swifthrcharts.js?labels="+"[January, February, March, April, May, April]"+"&data="+"[45, 48, 40, 19, 86, 88]""></script>*@


    <script>
        // -----------------------
        // - MONTHLY EMPLOYEES CHART -
        // -----------------------

        // Get context with jQuery - using jQuery's .get() method.
        var salesChartCanvas = $('#salesChart1').get(0).getContext('2d');
        // This will get the first returned node in the jQuery collection.
        var salesChart = new Chart(salesChartCanvas);

        var months = ["Null","January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];


        var monthsToDisplay = [months[@System.DateTime.Now.AddMonths(-6).Month],
                               months[@System.DateTime.Now.AddMonths(-5).Month],
                               months[@System.DateTime.Now.AddMonths(-4).Month],
                               months[@System.DateTime.Now.AddMonths(-3).Month],
                               months[@System.DateTime.Now.AddMonths(-2).Month],
                               months[@System.DateTime.Now.AddMonths(-1).Month]];


        var dataPerMonth = [@Model.empMasterDataItems.Where(x => System.Convert.ToDateTime(x.DateOfJoining).Month == @System.DateTime.Now.AddMonths(-6).Month).ToList().Count,
                            @Model.empMasterDataItems.Where(x => System.Convert.ToDateTime(x.DateOfJoining).Month == @System.DateTime.Now.AddMonths(-5).Month).ToList().Count,
                            @Model.empMasterDataItems.Where(x => System.Convert.ToDateTime(x.DateOfJoining).Month == @System.DateTime.Now.AddMonths(-4).Month).ToList().Count,
                            @Model.empMasterDataItems.Where(x => System.Convert.ToDateTime(x.DateOfJoining).Month == @System.DateTime.Now.AddMonths(-3).Month).ToList().Count,
                            @Model.empMasterDataItems.Where(x => System.Convert.ToDateTime(x.DateOfJoining).Month == @System.DateTime.Now.AddMonths(-2).Month).ToList().Count,
                            @Model.empMasterDataItems.Where(x => System.Convert.ToDateTime(x.DateOfJoining).Month == @System.DateTime.Now.AddMonths(-1).Month).ToList().Count
                            ];

        var salesChartData = {
            labels: monthsToDisplay,
            datasets: [
                {
                    label: 'Digital Goods',
                    fillColor: 'rgba(60,141,188,0.9)',
                    strokeColor: 'rgba(60,141,188,0.8)',
                    pointColor: '#3b8bba',
                    pointStrokeColor: 'rgba(60,141,188,1)',
                    pointHighlightFill: '#fff',
                    pointHighlightStroke: 'rgba(60,141,188,1)',
                    data: dataPerMonth
                }
            ]
        };

        var salesChartOptions = {
            // Boolean - If we should show the scale at all
            showScale: true,
            // Boolean - Whether grid lines are shown across the chart
            scaleShowGridLines: true,
            // String - Colour of the grid lines
            scaleGridLineColor: 'rgba(0,0,0,.05)',
            // Number - Width of the grid lines
            scaleGridLineWidth: 2,
            // Boolean - Whether to show horizontal lines (except X axis)
            scaleShowHorizontalLines: true,
            // Boolean - Whether to show vertical lines (except Y axis)
            scaleShowVerticalLines: true,
            // Boolean - Whether the line is curved between points
            bezierCurve: true,
            // Number - Tension of the bezier curve between points
            bezierCurveTension: 0.3,
            // Boolean - Whether to show a dot for each point
            pointDot: true,
            // Number - Radius of each point dot in pixels
            pointDotRadius: 4,
            // Number - Pixel width of point dot stroke
            pointDotStrokeWidth: 1,
            // Number - amount extra to add to the radius to cater for hit detection outside the drawn point
            pointHitDetectionRadius: 20,
            // Boolean - Whether to show a stroke for datasets
            datasetStroke: true,
            // Number - Pixel width of dataset stroke
            datasetStrokeWidth: 2,
            // Boolean - Whether to fill the dataset with a color
            datasetFill: true,
            // String - A legend template
            legendTemplate: '<ul class=\'<%=name.toLowerCase()%>-legend\'><% for (var i=0; i<datasets.length; i++){%><li><span style=\'background-color:<%=datasets[i].lineColor%>\'></span><%=datasets[i].label%></li><%}%></ul>',
            // Boolean - whether to maintain the starting aspect ratio or not when responsive, if set to false, will take up entire container
            maintainAspectRatio: true,
            // Boolean - whether to make the chart responsive to window resizing
            responsive: true
        };

        // Create the line chart
        salesChart.Line(salesChartData, salesChartOptions);

    </script>


    <script>
        // SLIMSCROLL FOR CHAT WIDGET
        $('#divDepartEmpCount').slimScroll({
            height: '200px'
        });

        var width = 100,
            perfData = window.performance.timing, // The PerformanceTiming interface represents timing-related performance information for the given page.
            EstimatedTime = -(perfData.loadEventEnd - perfData.navigationStart),
            time = parseInt((EstimatedTime / 1000) % 60) * 100;

        // Percentage Increment Animation
        var PercentageID = $("#percent1"),
            start = 0,
            end = 100,
            durataion = time;
        animateValue(PercentageID, start, end, durataion);

        function animateValue(id, start, end, duration) {

            var range = end - start,
                current = start,
                increment = end > start ? 1 : -1,
                stepTime = Math.abs(Math.floor(duration / range)),
                obj = $(id);

            var timer = setInterval(function () {
                current += increment;
                $(obj).text(current + "%");
                $("#bar1").css('width', current + "%");
                //obj.innerHTML = current;
                if (current == end) {
                    clearInterval(timer);
                }
            }, stepTime);
        }

        // Fading Out Loadbar on Finised
        setTimeout(function () {
            $('.pre-loader').fadeOut(300);
        }, time);

    </script>

    <script>
        $(document).ready(function () {
            $("#liDashboard").addClass("active");
        });
    </script>

    <script src="~/dist/js/pages/dashboard2.js"></script>
    <script>

        var monthsToDisplay = [@System.DateTime.Now.AddMonths(-6).Month,
                               @System.DateTime.Now.AddMonths(-5).Month,
                               @System.DateTime.Now.AddMonths(-4).Month,
                               @System.DateTime.Now.AddMonths(-3).Month,
                               @System.DateTime.Now.AddMonths(-2).Month,
                               @System.DateTime.Now.AddMonths(-1).Month];


        var dataPerMonth = [@Model.empMasterDataItems.Where(x => System.Convert.ToDateTime(x.DateOfJoining).Month == @System.DateTime.Now.AddMonths(-6).Month).ToList().Count,
                            @Model.empMasterDataItems.Where(x => System.Convert.ToDateTime(x.DateOfJoining).Month == @System.DateTime.Now.AddMonths(-5).Month).ToList().Count,
                            @Model.empMasterDataItems.Where(x => System.Convert.ToDateTime(x.DateOfJoining).Month == @System.DateTime.Now.AddMonths(-4).Month).ToList().Count,
                            @Model.empMasterDataItems.Where(x => System.Convert.ToDateTime(x.DateOfJoining).Month == @System.DateTime.Now.AddMonths(-3).Month).ToList().Count,
                            @Model.empMasterDataItems.Where(x => System.Convert.ToDateTime(x.DateOfJoining).Month == @System.DateTime.Now.AddMonths(-2).Month).ToList().Count,
                            @Model.empMasterDataItems.Where(x => System.Convert.ToDateTime(x.DateOfJoining).Month == @System.DateTime.Now.AddMonths(-1).Month).ToList().Count
                            ];
        document.getElementById("chartData").value = dataPerMonth;
        document.getElementById("chartMonths").value = monthsToDisplay;
    </script>
    <script src="~/dist/js/pages/swifthrcharts.js"></script>

    <script>
        $("#btnExport").click(function (e) {
            //alert("excel");
            //window.open('data:application/vnd.ms-excel,' + $('#divJoinerslist').dataTable.render);
            @*$("#tblJoinersList").dataTable.render.*@
           // $('#tblJoinersList').tableExport({ type: 'excel' });

            //PDF
            $('#tblJoinersList').tableExport({
                type: 'pdf',
                jspdf: {
                    orientation: 'l',
                    format: 'a4',
                    margins: { left: 10, right: 10, top: 20, bottom: 20 },
                    autotable: {
                        styles: {
                            fillColor: 'inherit',
                            textColor: 'inherit'
                        },
                        tableWidth: 'auto'
                    }
                }
            });
            e.preventDefault();
        });
    </script>
    <script>
        $(document).ready(function () {
            var table = $('#tblJoinersList').DataTable({
                lengthChange: false,
                buttons: ['copy', 'excel', 'pdf', 'colvis']
            });

            table.buttons().container()
                .appendTo('#example_wrapper .col-sm-6:eq(0)');
        });
    </script>

}